<!doctype html>
<!--[if IE 7]>
<html class="ie ie7" lang="zh-CN" xmlns:sitemesh>
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="zh-CN" xmlns:sitemesh>
<![endif]-->
<!--[if !(IE 7) | !(IE 8)]>
<html lang="zh-CN" xmlns:sitemesh>
<![endif]-->
<head>
    <title>编辑头像-出国去旅游网</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta http-equiv="Cache-Control" content="no-store"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <link rel="stylesheet" href="css/common.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/my-account.css" type="text/css" media="all">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <script type="text/javascript" src="js/respond.min.js"></script>
    <![endif]-->
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <link rel="stylesheet" href="css/jquery.Jcrop.css"/>
</head>
<body>
<script type="text/javascript">
    var url = window.location.search;
    var source = url.substring(url.lastIndexOf('=')+1, url.length);
    var sUserAgent = navigator.userAgent.toLowerCase();
    var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
    var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
    var bIsMidp = sUserAgent.match(/midp/i) == "midp";
    var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
    var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
    var bIsAndroid = sUserAgent.match(/android/i) == "android";
    var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
    var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
</script>
<div class="container">
    <div class="wrap">
        <p class="login-title pl67 yahei">账号设置</p>
    </div>
    <div class="wrap account-container clearfix">
        <div class="triangle-up-box relative">
            <span class="triangle-up-bg"></span>
            <span class="triangle-up"></span>
        </div>
        <div class="account-wrap">
            <div id="select-tab" data-selected-tab="toSetPortrait">
                <div class="set-portrait yahei">
                    <form id="cropForm" name="cropForm" method="post" action="http://xxxxx">
                        <!--通过生成尺寸和旋转角度 后台获取尺寸和旋转角度再进行裁剪-->
                        <p class="upload-btn-box font16 clearfix">
                            <a class="upload-btn font18 left relative" href="javascript:;">
                                上传头像<input id="uploadImg" type="file" name="file"/>
                            </a>
                            仅支持JPG、GIF、PNG格式图片，且小于2M
                        </p>
                        <input id="offsetY1" type="hidden" name="top" value="0">
                        <input id="offsetX1" type="hidden" name="left" value="0">
                        <input id="offsetX2" type="hidden" name="right" value="100">
                        <input id="offsetY2" type="hidden" name="bottom" value="100">
                        <input id="rotation" type="hidden" name="rotation" value="0">
                        <input id="scale" type="hidden" name="scale" value="0">
                    </form>
                    <div class="clearfix">
                        <div class="portrait-left left">
                            <div id="avatarBox" class="avatar-box">
                                <div id="avatarPrototype" class="avatar-prototype portrait-preview">
                                    <img src="https://avatars0.githubusercontent.com/u/6405463?v=2&amp" alt=""/>
                                </div>
                            </div>
                            <div class="avatar-zoom clearfix">
                                <a href="javascript:;" title="放大" class="zoom-in right" id="idBig">放大</a>
                                <a href="javascript:;" title="缩小" class="zoom-out left" id="idSmall">缩小</a>
                                <div id="avatarZoom" class="zoom-silder relative">
                                    <span id="sliderBlock" class="ui-slider-handle"></span>
                                </div>
                            </div>
                            <div class="portrait-submit-box clearfix">
                                <a class="portrait-submit-save" href="javascript:;" onClick="submitAvatar();">确&nbsp;定</a>
                                <a class="portrait-submit-cancel" href="javascript:;" onClick="window.location.reload()">取&nbsp;消</a>
                            </div>
                        </div>
                        <dl class="portrait-list font14 left">
                            <dt>您上传的头像会自动生成小尺寸头像，请注意小尺寸的头像是否清晰</dt>
                            <dd>
                                <div class="avatar-preview-item">
                                    <div class="avatar-preview-big portrait-preview">
                                        <div id="avatarPreviewBig">
                                            <img src="https://avatars0.githubusercontent.com/u/6405463?v=2&amp" alt=""/>
                                        </div>
                                    </div>
                                    <p>160×160像素</p>
                                </div>
                                <div class="avatar-preview-item">
                                    <div class="avatar-preview-normal portrait-preview">
                                        <div id="avatarPreviewNormal">
                                            <img src="https://avatars0.githubusercontent.com/u/6405463?v=2&amp" alt=""/>
                                        </div>
                                    </div>
                                    <p>100×100像素</p>
                                </div>
                                <div class="avatar-preview-item">
                                    <div class="avatar-preview-small portrait-preview">
                                        <div id="avatarPreviewSmall">
                                            <img src="https://avatars0.githubusercontent.com/u/6405463?v=2&amp" alt=""/>
                                        </div>
                                    </div>
                                    <p>50×50像素</p>
                                </div>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/popups.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.4.custom.js"></script>
<script type="text/javascript" src="jcrop/jquery.Jcrop.js"></script>
<script type="text/javascript" src="jcrop/viewimg.1.0.js"></script>
<script type="text/javascript" src="js/portrait.js"></script>
<script type="text/javascript">
    $(function () {
        $("#avatarZoom").slider({
            value: 0,
            min: 0,
            max: 220,
            step: 22,
            disabled: true
        });
    });
    window.onload = function(){
        //默认图像居中显示
        if ($("#avatarPrototype img").width() < 300 && $("#avatarPrototype>img").height() < 300) {
            resetImgSize($("#avatarPrototype>img"));
        } else {
            cutImage($("#avatarPrototype>img"),300,300);
        }
        $('#avatarPrototype').Jcrop({
            setSelect: [0, 0, 100, 100],
            onChange: showPreview,
            onSelect: showPreview,
            bgFade: true,
            bgColor: "#000",
            aspectRatio: 1,
            bgOpacity: .5,
            minSize: [100, 100],
            minSelect: [50, 50],
            onRelease:function(){
                resetAvatar();
            }
        });
        var file = $("#uploadImg");
        file.viewimg({
            targetDiv: $("#avatarPrototype,#avatarPreviewBig,#avatarPreviewNormal,#avatarPreviewSmall"),  //图片显示的容器
            sizingMethod: "scale", //按照图片比例自适应容器
            errorDiv: $("#error")  //错误显示位置
        });
    }
</script>
</body>
</html>
